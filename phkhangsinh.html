<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phần mềm phối hợp Kháng sinh thông minh</title>
    <!-- Tailwind CSS và các thư viện cần thiết -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://vydnquang.github.io/codeks/khangsinh.css">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <h1>Tra cứu phối hợp Kháng Sinh</h1>
        <p class="update-info">
            <i class="fas fa-sync-alt loading-icon"></i>(Cập nhật đến 8/2025: <span id="antibioticCount">100</span> loại kháng sinh)
        </p>
    </header>

    <main class="container">
        <div class="input-group">
            <div class="autocomplete-container">
                <div class="pill-visual" id="pillA">
                    <input type="text" id="antibioticA" placeholder="Nhập tên kháng sinh 1">
                    <div class="divider"></div>
                </div>
                <div id="suggestionsA" class="suggestions-list"></div>
            </div>
            <div class="autocomplete-container">
                <div class="pill-visual" id="pillB">
                    <input type="text" id="antibioticB" placeholder="Nhập tên kháng sinh 2">
                    <div class="divider"></div>
                </div>
                <div id="suggestionsB" class="suggestions-list"></div>
            </div>
        </div>

        <button id="checkCombinationBtn" class="bg-blue-500 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-blue-600 transition-colors duration-300 w-full flex items-center justify-center gap-2">
            <i class="fas fa-search"></i> Kiểm tra !
        </button>

        <div class="result-box" id="result">
            Kết quả sẽ hiển thị ở đây
        </div>
        <div class="error-message" id="errorMessage"></div>

        <div class="general-guidance" id="generalGuidance">
            <h3><i class="fas fa-exclamation-triangle warning-icon"></i> Chỉ dẫn quan trọng:</h3>
            <ol>
                <li>Việc phối hợp kháng sinh cần phải dựa trên lâm sàng từng ca bệnh cụ thể, sau khi thực hiện kháng sinh đồ đầy đủ.</li>
                <li>Cần cân nhắc giữa lợi và hại khi phối hợp kháng sinh, vì "thuốc là con dao 2 lưỡi", chỉ nên phối hợp khi thực sự cần thiết.</li>
                <li>Hãy sử dụng kháng sinh một cách có trách nhiệm để không làm cho tình trạng kháng kháng sinh ngày càng nghiêm trọng hơn.</li>
                <li>Luôn luôn điều chỉnh liều lượng cho phù hợp, chứ không cứng nhắc 1 liều cho cả một quá trình điều trị.</li>
                <li>Các kết quả "CẠNH TRANH"; "THẬN TRỌNG"; "TRUNG TÍNH" cần được tìm hiểu kỹ đối với mỗi cặp kháng sinh cần kết hợp.</li>
                <li>Tất cả các kết quả trên chỉ mang tính tham khảo, bác sĩ phải kiểm chứng lại kết quả đưa ra trước khi thực hiện.</li>
            </ol>
        </div>
    </main>

    <footer class="bg-white shadow-inner p-4 mt-auto">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-center items-center gap-4">
                <!-- Nút 1: Kiểm tra tương tác thuốc với Dropdown -->
                <!-- Đổi ID để khớp với menuks.js -->
                <div class="relative w-full md:w-auto">
                    <button id="homeDropdownBtn" class="w-full px-6 py-3 bg-indigo-500 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 transition-colors duration-300 text-center focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50">
                        Kiểm tra tương tác thuốc
                    </button>
                    <!-- Thêm class hidden ban đầu để menuks.js có thể xử lý việc hiển thị -->
                    <div id="homeDropdownMenu" class="dropdown-menu hidden scale-95 opacity-0">
                        <div class="p-2 space-y-2">
                            <a href="https://www.google.com/search?q=phối+hợp+kháng+sinh" target="_blank" class="block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">
                                Phối hợp kháng sinh
                            </a>
                            <a href="https://www.google.com/search?q=tương+tác+thuốc+khác" target="_blank" class="block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">
                                Tương tác thuốc khác
                            </a>
                            <a href="https://www.google.com/search?q=cơ+sở+dữ+liệu+thuốc" target="_blank" class="block w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">
                                Cơ sở dữ liệu thuốc
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Nút 2: Giới thiệu, mở modal -->
                <!-- Đổi ID để khớp với menuks.js -->
                <button id="aboutBtn" class="w-full md:w-auto px-6 py-3 bg-indigo-500 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-600 transition-colors duration-300 text-center focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50">
                    Giới thiệu
                </button>

                <!-- Nút 3: Liên hệ, mở modal -->
                <button id="contactBtn" class="w-full md:w-auto px-6 py-3 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-600 transition-colors duration-300 text-center focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50">
                    Liên hệ
                </button>
            </div>
            <p class="text-center text-gray-500 text-sm mt-4">
                Copyright © 2025 by BSTY. <a href="https://www.facebook.com/annhonpet" target="_blank" class="text-blue-600 hover:text-blue-800 transition-colors">An Nhơn Pet</a>
            </p>
        </div>
    </footer>

    <!-- Modal Giới thiệu -->
    <div id="aboutModal" class="modal-overlay">
        <div class="modal-content max-w-lg w-full">
            <button id="closeAboutModalBtn" class="close-btn">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 hover:text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">Giới thiệu Phần mềm</h2>
            <div class="space-y-4 text-gray-700">
                <p>Đây là phần mềm tra cứu phối hợp kháng sinh thông minh, được xây dựng với mục tiêu cung cấp một công cụ tham khảo nhanh chóng về tương tác của các loại kháng sinh.</p>
                <p>Phần mềm bao gồm các quy tắc phối hợp dựa trên cơ chế tác động của thuốc, giúp các chuyên gia y tế có thể đưa ra quyết định lâm sàng tốt hơn.</p>
                <p>Chúng tôi luôn nỗ lực cập nhật dữ liệu để mang lại thông tin chính xác và hữu ích nhất. Tuy nhiên, các kết quả chỉ mang tính chất tham khảo. Vui lòng tham khảo ý kiến chuyên gia trước khi đưa ra quyết định điều trị.</p>
            </div>
        </div>
    </div>
    
    <!-- Modal Liên hệ -->
    <div id="contactModal" class="modal-overlay">
        <div class="modal-content max-w-sm w-full">
            <button id="closeContactModalBtn" class="close-btn">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400 hover:text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">Thông tin Liên hệ</h2>
            <div class="space-y-4 text-center">
                <p class="text-gray-700">
                    <span class="font-semibold">Tác giả:</span> Nguyễn Văn A
                </p>
                <p class="text-gray-700">
                    <span class="font-semibold">Điện thoại:</span> 0987-654-321
                </p>
            </div>
        </div>
    </div>
    
    <!-- Các file JavaScript cần được gọi đúng thứ tự -->
    <script type="module" src="https://vydnquang.github.io/codeks/dataks.js"></script>
    <script type="module" src="https://vydnquang.github.io/codeks/kiemtraks.js"></script>
    <script type="module" src="https://vydnquang.github.io/codeks/menuks.js"></script>
    
    <!-- Tối ưu hóa việc đếm số lượng kháng sinh, lấy số liệu thực tế từ dataks.js -->
    <script type="module">
        import { allAntibiotics } from './kiemtraks.js';
        
        document.addEventListener('DOMContentLoaded', function() {
            const countElement = document.getElementById('antibioticCount');
            const targetCount = allAntibiotics.length; // Lấy số lượng thực tế từ data
            let currentCount = 100;
            const duration = 5000; // Rút ngắn thời gian để hiệu ứng mượt hơn
            const increment = Math.ceil((targetCount - currentCount) / (duration / 16)); // Tính toán lại tốc độ tăng

            const updateCount = () => {
                if (currentCount < targetCount) {
                    currentCount += increment;
                    if (currentCount > targetCount) {
                        currentCount = targetCount;
                    }
                    countElement.textContent = currentCount;
                    requestAnimationFrame(updateCount);
                } else {
                    countElement.textContent = targetCount;
                }
            };
            updateCount();
        });
    </script>
</body>
</html>
