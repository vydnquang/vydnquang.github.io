<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tính Cân Nặng Lý Tưởng Của Chó</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
    <style>
        .modal-content-scrollable {
            max-height: 80vh; /* Chiều cao tối đa 80% chiều cao màn hình */
            overflow-y: auto; /* Tự động cuộn theo chiều dọc */
        }
    </style>
<body class="font-sans bg-cyan-100 text-gray-800 flex flex-col min-h-screen m-0 p-0">
    <div id="header-placeholder"></div>
    <main class="flex-grow p-4 md:p-8 flex justify-center items-start">
        <div class="bg-white p-6 md:p-8 rounded-xl shadow-xl w-full max-w-sm sm:max-w-md md:max-w-xl lg:max-w-2xl mx-auto">
            <h1 class="text-2xl font-bold text-center text-gray-800 mb-1">Tính Cân nặng lý tưởng của chó</h1>
            <p class="text-center text-gray-600 italic text-sm mb-6">Dựa theo phương pháp của các nhà nghiên cứu tại Đại học Liverpool và Royal Canin</p>
            
            <div class="bg-gray-50 p-5 rounded-lg border border-gray-200 mb-6 grid gap-4">
                <div class="flex flex-col">
                    <label for="currentWeight" class="text-gray-700 font-semibold mb-2">Cân nặng hiện tại (kg):</label>
                    <input type="number" id="currentWeight" placeholder="Nhập cân nặng hiện tại" required
                        class="w-full p-2.5 border border-gray-300 rounded-md text-sm outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div class="flex flex-col">
                    <label for="bcsScore" class="flex justify-between items-center text-gray-700 font-semibold mb-2">
                        <span>Điểm BCS (Body Condition Score):</span>
                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800 transition-colors" onclick="showPopup(); return false;">Tìm hiểu thêm</a>
                    </label>
                    <select id="bcsScore" required
                            class="w-full p-2.5 border border-gray-300 rounded-md text-sm outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="" disabled selected>Chọn điểm BCS</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                    </select>
                </div>
            </div>
            
            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mb-6">
                <div class="flex justify-between items-center py-2">
                    <span class="text-gray-600 font-medium">Bước 1: Lấy điểm BCS trừ đi 5</span>
                    <span class="font-bold text-blue-600" id="step1_result"></span>
                </div>
                <div class="flex justify-between items-center py-2">
                    <span class="text-gray-600 font-medium">Bước 2: Nhân với 10</span>
                    <span class="font-bold text-blue-600" id="step2_result"></span>
                </div>
                <div class="flex justify-between items-center py-2">
                    <span class="text-gray-600 font-medium">Bước 3: Cộng 100</span>
                    <span class="font-bold text-blue-600" id="step3_result"></span>
                </div>
                <div class="flex justify-between items-center py-2">
                    <span class="text-gray-600 font-medium">Bước 4: Lấy 100 chia cho kết quả ở bước 3 (Làm tròn 3 chữ số)</span>
                    <span class="font-bold text-blue-600" id="step4_result"></span>
                </div>
                <div class="flex justify-between items-center py-2">
                    <span class="text-gray-600 font-medium">Bước 5: Nhân kết quả ở bước 4 với cân nặng hiện tại</span>
                    <span class="font-bold text-blue-600" id="step5_result"></span>
                </div>
            </div>
            
            <button onclick="calculateIdealWeight()" class="w-full py-3 px-4 bg-blue-500 text-white rounded-lg font-semibold text-lg cursor-pointer hover:bg-blue-600 transition-colors">Tính toán</button>
            
            <div class="bg-gray-50 border-2 border-dashed border-gray-300 p-5 rounded-lg text-center mt-6 mb-5" style="display: none;" id="resultBox">
                <p class="m-0 text-gray-800 text-base">Cân nặng lý tưởng sẽ là:</p>
                <p id="idealWeightResult" class="text-3xl font-bold text-green-600"></p>
            </div>
            
            <div id="conclusion" style="display: none;" class="mt-6 p-4 rounded-lg text-base leading-relaxed break-words"></div>
        </div>

        <div id="bcsPopup" class="fixed inset-0 bg-black bg-opacity-60 hidden justify-center items-center z-50">
            <div class="bg-white p-6 rounded-lg shadow-2xl w-11/12 max-w-xl max-h-[80vh] overflow-y-auto relative">
                <span class="absolute top-2 right-4 text-3xl font-bold text-gray-400 cursor-pointer hover:text-gray-600 transition-colors" onclick="closePopup()">&times;</span>
                <div class="text-xl font-bold text-center text-gray-800 mb-4">Cách chỉ định điểm số BCS</div>
                <p class="text-justify text-sm leading-relaxed mb-4">Một số thông tin cho rằng: BCS = cân nặng (kilôgam) / (chiều dài x chiều dài) (mét). Nhưng đây không phải là cách tính điểm thể trạng (BCS) chuẩn. BCS là phương pháp đánh giá trực quan và xúc giác về lượng mỡ và cơ dự trữ của động vật, thường được tính theo thang điểm từ 1 đến 9.</p>
                <p class="text-sm leading-relaxed mb-4">Có 2 thang đo BCS, tùy theo bạn dùng, đó là thang đo 1-5/5 và 1-9/9.</p>
                <p class="text-sm leading-relaxed mb-4">Để tính điểm BCS, bạn phải nhìn và cảm nhận thú cưng của mình. Dựa trên những gì bạn đã thấy và cảm nhận, bây giờ bạn có thể cho điểm.</p>
                <div class="text-center">
                    <img src="data/bcs-cho.png" alt="Hình ảnh minh họa về điểm BCS của chó" class="max-w-full h-auto mb-5 rounded-lg">
                </div>
                <div class="mb-2 text-sm leading-relaxed text-justify">
                    <b class="text-blue-600">1/5 hoặc 1/9:</b> Xương sườn, xương sống và xương chậu nhô ra. Mất cơ rõ rệt. Vòng eo rõ rệt và bụng chảy xệ nghiêm trọng.
                </div>
                <div class="mb-2 text-sm leading-relaxed text-justify">
                    <b class="text-blue-600">1,5/5 hoặc 2/9:</b> Xương sườn, xương sống và xương chậu có thể nhìn thấy, nhưng chỉ thấy mất một ít khối lượng cơ. Có thể thấy rõ vòng eo và bụng chảy xệ.
                </div>
                <div class="mb-2 text-sm leading-relaxed text-justify">
                    <b class="text-blue-600">2/5 hoặc 3/9:</b> Xương sườn, xương chậu và xương sống dễ sờ thấy và có thể nhìn thấy phần nào. Có thể nhìn thấy vòng eo và bụng chảy xệ nghiêm trọng.
                </div>
                <div class="mb-2 text-sm leading-relaxed text-justify">
                    <b class="text-blue-600">2,5/5 hoặc 4/9:</b> Xương sườn, xương chậu và xương sống dễ sờ thấy nhưng không lộ rõ. Vòng eo và cơ bụng săn chắc có thể nhìn thấy rõ.
                </div>
                <div class="mb-2 text-sm leading-relaxed text-justify">
                    <b class="text-blue-600">3/5 hoặc 5/9:</b> Có thể sờ thấy xương sườn, xương chậu và xương sống, với một lớp mỡ mỏng bao phủ. Vòng eo và bụng săn chắc rõ rệt, nhưng không quá nghiêm trọng, với các đường cong dần dần.
                </div>
                <div class="mb-2 text-sm leading-relaxed text-justify">
                    <b class="text-blue-600">3,5/5 hoặc 6/9:</b> Lớp mỡ mỏng phủ lên xương sườn, xương sống và xương chậu khiến việc sờ nắn khó khăn hơn. Có vết mổ ở bụng nhưng không đáng kể. Vòng eo có thể nhìn thấy nhưng không rõ.
                </div>
                <div class="mb-2 text-sm leading-relaxed text-justify">
                    <b class="text-blue-600">4/5 hoặc 7/9:</b> Xương sườn được bao phủ bởi lớp mỡ dày, cần ấn ngón tay mới cảm nhận được. Khó cảm nhận được xương sống hoặc xương chậu. Vòng eo không rõ ràng. Bụng vẫn hơi nhô ra.
                </div>
                <div class="mb-2 text-sm leading-relaxed text-justify">
                    <b class="text-blue-600">4,5/5 hoặc 8/9:</b> Xương sườn, xương chậu và xương sống được bao phủ bởi lớp mỡ dày và chỉ có thể sờ thấy khi ấn mạnh. Không có phẫu thuật căng da bụng hoặc thắt eo.
                </div>
                <div class="mb-2 text-sm leading-relaxed text-justify">
                    <b class="text-blue-600">5/5 hoặc 9/9:</b> Xương sườn và xương sống không sờ thấy được dưới lớp mỡ dày. Bụng nhô xuống (ngược lại với phẫu thuật căng da bụng) và nhô ra ngoài (vòng eo nhô ra). Có lớp mỡ thừa ở vùng thắt lưng, quanh cổ, trên chi trên và gốc đuôi.
                </div>
                <p class="mt-5 text-sm italic text-gray-500"><b>Lưu ý:</b> BCS ở mức 4/5 hoặc 7/9 ở chó tương ứng với 30% mỡ cơ thể, được coi là thừa cân ở người.</p>
            </div>
        </div>
    </main>

    <div id="footer-placeholder"></div>
    <div id="modals-placeholder"></div>

    <script>
        function calculateIdealWeight() {
            const currentWeight = parseFloat(document.getElementById('currentWeight').value);
            const bcsScore = parseInt(document.getElementById('bcsScore').value);
            const resultBox = document.getElementById('resultBox');
            const conclusionDiv = document.getElementById('conclusion');

            // Reset display
            document.getElementById('step1_result').textContent = '';
            document.getElementById('step2_result').textContent = '';
            document.getElementById('step3_result').textContent = '';
            document.getElementById('step4_result').textContent = '';
            document.getElementById('step5_result').textContent = '';
            resultBox.style.display = 'none';
            conclusionDiv.style.display = 'none';

            if (isNaN(currentWeight) || currentWeight <= 0 || isNaN(bcsScore) || bcsScore < 1 || bcsScore > 9) {
                document.getElementById('step1_result').textContent = 'Vui lòng nhập đầy đủ và chính xác dữ liệu.';
                return;
            }
            
            // BƯỚC 1: Lấy điểm BCS trừ đi 5
            const step1 = bcsScore - 5;
            document.getElementById('step1_result').textContent = step1;
            
            // BƯỚC 2: Nhân với 10
            const step2 = step1 * 10;
            document.getElementById('step2_result').textContent = step2;
            
            // BƯỚC 3: Cộng 100
            const step3 = step2 + 100;
            document.getElementById('step3_result').textContent = step3;
            
            // BƯỚC 4: Lấy 100 chia cho kết quả ở bước 3, làm tròn 3 chữ số
            const step4 = (100 / step3).toFixed(3);
            document.getElementById('step4_result').textContent = step4;
            
            // BƯỚC 5: Nhân kết quả ở bước 4 với cân nặng hiện tại
            const idealWeight = (step4 * currentWeight).toFixed(2);
            document.getElementById('step5_result').textContent = idealWeight + ' kg';

            // Hiển thị kết quả cuối cùng
            document.getElementById('idealWeightResult').textContent = idealWeight + ' kg';
            resultBox.style.display = 'block';

            // Kết luận và lời khuyên
            let advice;
            let diff = Math.abs(currentWeight - idealWeight);
            let tolerance = 0.5; // Dung sai 0.5kg
            
            if (Math.abs(currentWeight - idealWeight) <= tolerance) {
                advice = 'Cân nặng hiện tại của bé cún đang ở mức lý tưởng. Hãy duy trì chế độ ăn uống và tập luyện này!';
                conclusionDiv.classList.add('bg-green-200', 'text-green-800');
            } else if (currentWeight < idealWeight) {
                advice = `Cân nặng của bé cún đang thấp hơn mức lý tưởng ${diff.toFixed(2)} kg. Bạn nên cân nhắc điều chỉnh chế độ ăn uống để bạn ý tăng cân dần dần.`;
                conclusionDiv.classList.add('bg-yellow-100', 'text-yellow-800');
            } else {
                advice = `Cân nặng của bạn cún đang vượt quá mức lý tưởng ${diff.toFixed(2)} kg. Bạn nên tham khảo ý kiến chuyên gia để có kế hoạch giảm cân an toàn cho bạn ý.`;
                conclusionDiv.classList.add('bg-red-100', 'text-red-800');
            }

            conclusionDiv.innerHTML = `<p><b>Kết luận: <br></b> ${advice}</p>`;
            conclusionDiv.style.display = 'block';
        }

        function showPopup() {
            document.getElementById('bcsPopup').style.display = 'flex';
        }

        function closePopup() {
            document.getElementById('bcsPopup').style.display = 'none';
        }
    </script>
    <script src="theme/main.js"></script>
</body>
</html>
